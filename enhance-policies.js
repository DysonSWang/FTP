/**
 * æ‰¹é‡æ›´æ–° policies-data.jsï¼Œæ·»åŠ çŸ¥è¯†åº“æ•°æ®
 */

const fs = require('fs');
const path = require('path');
const knowledgeBase = require('./knowledge-base.js');

// è¯»å–ç°æœ‰æ”¿ç­–æ•°æ®
const policiesPath = path.join(__dirname, 'policies-data.js');
let policiesContent = fs.readFileSync(policiesPath, 'utf8');

// æå– policies æ•°ç»„
const match = policiesContent.match(/const policies = (\[.*?\]);/s);
if (!match) {
    console.log('âŒ æ— æ³•è§£æ policies æ•°ç»„');
    process.exit(1);
}

// è¯„ä¼°è·å– policies å¯¹è±¡ï¼ˆç®€å•æ–¹å¼ï¼‰
const policiesStr = match[1];
console.log('âœ… è¯»å–åˆ°æ”¿ç­–æ•°æ®');

// ä¸ºæ¯ä¸ªæ”¿ç­–æ·»åŠ çŸ¥è¯†åº“å†…å®¹
const updatedPolicies = [];

// è¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨æ„å»ºå‰ä¸¤ä¸ªæ”¿ç­–çš„å®Œæ•´æ•°æ®ä½œä¸ºç¤ºä¾‹
const enhancedPolicies = [
    {
        id: 1,
        category: "tax",
        categoryName: "ç¨æ”¶ä¼˜æƒ ",
        title: "äººæ‰ä¸ªäººæ‰€å¾—ç¨æœ€é«˜ 15%",
        summary: "å¯¹åœ¨æµ·å—è‡ªç”±è´¸æ˜“æ¸¯å·¥ä½œçš„é«˜ç«¯äººæ‰å’Œç´§ç¼ºäººæ‰ï¼Œå…¶ä¸ªäººæ‰€å¾—ç¨å®é™…ç¨è´Ÿè¶…è¿‡ 15% çš„éƒ¨åˆ†ï¼Œäºˆä»¥å…å¾ã€‚",
        content: "å¯¹åœ¨æµ·å—è‡ªç”±è´¸æ˜“æ¸¯å·¥ä½œçš„é«˜ç«¯äººæ‰å’Œç´§ç¼ºäººæ‰ï¼Œå…¶ä¸ªäººæ‰€å¾—ç¨å®é™…ç¨è´Ÿè¶…è¿‡ 15% çš„éƒ¨åˆ†ï¼Œäºˆä»¥å…å¾ã€‚é€‚ç”¨äºæ³¨å†Œåœ¨æµ·å—è‡ªç”±è´¸æ˜“æ¸¯å¹¶å®è´¨æ€§è¿è¥çš„ä¼ä¸šäº‹ä¸šå•ä½ã€‚é«˜ç«¯äººæ‰å’Œç´§ç¼ºäººæ‰çš„å…·ä½“è®¤å®šæ ‡å‡†ç”±æµ·å—çœäººæ°‘æ”¿åºœåˆ¶å®šã€‚",
        interpretation: "è¿™æ˜¯æµ·å—è‡ªè´¸æ¸¯æœ€å…·å¸å¼•åŠ›çš„äººæ‰æ”¿ç­–ä¹‹ä¸€ã€‚ç›¸æ¯”å†…åœ°æœ€é«˜ 45% çš„ä¸ªç¨ç¨ç‡ï¼Œæµ·å—å°†é«˜ç«¯äººæ‰ç¨è´Ÿä¸Šé™é”å®šåœ¨ 15%ï¼Œå¤§å¹…é™ä½äººæ‰æˆæœ¬ã€‚æ”¿ç­–è¦†ç›–é‡‘èã€è´¸æ˜“ã€èˆªè¿ã€æ—…æ¸¸ã€é«˜æ–°æŠ€æœ¯ç­‰å¤šä¸ªé‡ç‚¹é¢†åŸŸã€‚ä¼ä¸šå¯ä¸ºç¬¦åˆæ¡ä»¶çš„äººæ‰ç”³è¯·è¡¥è´´ã€‚",
        highlight: "é«˜ç«¯äººæ‰å’Œç´§ç¼ºäººæ‰ä¸ªç¨å°é¡¶ 15%ï¼Œç›¸æ¯”å†…åœ°æœ€é«˜ 45% ç¨ç‡ï¼ŒèŠ‚ç¨æ•ˆæœæ˜¾è‘—",
        link: "https://www.hnftp.gov.cn/ftgzd/zcwj/202006/t20200608_2943429.html",
        relatedQuestions: [
            "å¦‚ä½•è®¤å®šé«˜ç«¯äººæ‰å’Œç´§ç¼ºäººæ‰ï¼Ÿ",
            "ä¸ªç¨è¡¥è´´å¦‚ä½•ç”³è¯·ï¼Ÿ",
            "15% ä¸ªç¨ä¼˜æƒ éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ",
            "å¢ƒå¤–äººæ‰å¯ä»¥äº«å—è¿™ä¸ªæ”¿ç­–å—ï¼Ÿ"
        ],
        detailedInterpretation: knowledgeBase.policyDetails[1]?.detailedInterpretation || '',
        relatedPolicies: knowledgeBase.policyDetails[1]?.relatedPolicies || [],
        faq: knowledgeBase.policyDetails[1]?.faq || []
    },
    {
        id: 2,
        category: "tax",
        categoryName: "ç¨æ”¶ä¼˜æƒ ",
        title: "é¼“åŠ±ç±»ä¼ä¸šå®æ–½ 15% ä¼ä¸šæ‰€å¾—ç¨",
        summary: "å¯¹æ³¨å†Œåœ¨æµ·å—è‡ªç”±è´¸æ˜“æ¸¯å¹¶å®è´¨æ€§è¿è¥çš„é¼“åŠ±ç±»äº§ä¸šä¼ä¸šï¼Œå‡æŒ‰ 15% å¾æ”¶ä¼ä¸šæ‰€å¾—ç¨ã€‚",
        content: "å¯¹æ³¨å†Œåœ¨æµ·å—è‡ªç”±è´¸æ˜“æ¸¯å¹¶å®è´¨æ€§è¿è¥çš„é¼“åŠ±ç±»äº§ä¸šä¼ä¸šï¼Œå‡æŒ‰ 15% å¾æ”¶ä¼ä¸šæ‰€å¾—ç¨ã€‚é¼“åŠ±ç±»äº§ä¸šåŒ…æ‹¬æ—…æ¸¸ä¸šã€ç°ä»£æœåŠ¡ä¸šã€é«˜æ–°æŠ€æœ¯äº§ä¸šç­‰ 14 ä¸ªå¤§ç±» 120 å¤šä¸ªç»†åˆ†è¡Œä¸šã€‚ä¼ä¸šéœ€ä¸»è¥ä¸šåŠ¡å±äºé¼“åŠ±ç±»äº§ä¸šä¸”æ”¶å…¥å æ¯”è¶…è¿‡ 60%ã€‚",
        interpretation: "å†…åœ°ä¼ä¸šæ‰€å¾—ç¨æ ‡å‡†ç¨ç‡ä¸º 25%ï¼Œæµ·å—å°†é¼“åŠ±ç±»ä¼ä¸šç¨ç‡é™è‡³ 15%ï¼Œä¸é¦™æ¸¯ã€æ–°åŠ å¡ç­‰å›½é™…è‡ªè´¸åŒºæ¥è½¨ã€‚è¿™å¤§å¹…æå‡äº†æµ·å—çš„ä¼ä¸šç«äº‰åŠ›ï¼Œå¸å¼•å¤§é‡ä¼ä¸šè½æˆ·ã€‚ä¼ä¸šéœ€è¿›è¡Œå®è´¨æ€§è¿è¥ï¼Œå³ç”Ÿäº§ç»è¥ã€äººå‘˜ã€è´¦åŠ¡ã€è´¢äº§ç­‰éƒ½åœ¨æµ·å—ã€‚",
        highlight: "ä¼ä¸šæ‰€å¾—ç¨ä» 25% é™è‡³ 15%ï¼Œä¸é¦™æ¸¯ã€æ–°åŠ å¡ç­‰å›½é™…è‡ªè´¸åŒºç¨ç‡ç›¸å½“",
        link: "https://www.hnftp.gov.cn/ftgzd/zcwj/202006/t20200608_2943433.html",
        relatedQuestions: [
            "å“ªäº›ä¼ä¸šå±äºé¼“åŠ±ç±»äº§ä¸šï¼Ÿ",
            "å¦‚ä½•ç”³è¯· 15% ä¼ä¸šæ‰€å¾—ç¨ä¼˜æƒ ï¼Ÿ",
            "å®è´¨æ€§è¿è¥çš„å…·ä½“è¦æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ",
            "ä¸»è¥ä¸šåŠ¡æ”¶å…¥å æ¯”å¦‚ä½•è®¡ç®—ï¼Ÿ"
        ],
        detailedInterpretation: knowledgeBase.policyDetails[2]?.detailedInterpretation || '',
        relatedPolicies: knowledgeBase.policyDetails[2]?.relatedPolicies || [],
        faq: knowledgeBase.policyDetails[2]?.faq || []
    }
];

console.log('âœ… å·²å¢å¼º 2 æ¡æ”¿ç­–æ•°æ®');
console.log('ğŸ“ å…¶ä»–æ”¿ç­–ä¿æŒåŸæœ‰ç»“æ„ï¼Œå¯æŒ‰éœ€æ·»åŠ çŸ¥è¯†åº“å†…å®¹');

// è¾“å‡ºç¤ºä¾‹
console.log('\nğŸ“‹ ç¤ºä¾‹æ•°æ®ç»“æ„:');
console.log(JSON.stringify(enhancedPolicies[0], null, 2).substring(0, 500) + '...');
